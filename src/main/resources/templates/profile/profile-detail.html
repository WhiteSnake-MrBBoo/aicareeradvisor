<!DOCTYPE html>
<html lang="ko"
      xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>프로필 상세</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
          rel="stylesheet">

    <style>
        body {
            background-color: #f7f7f7;
        }
        .profile-header-card {
            border-radius: 0.75rem;
        }
        .section-card {
            border-radius: 0.75rem;
        }
        .badge-profile-type {
            font-size: 0.8rem;
        }
    </style>
</head>
<body>

<div class="container py-4">

    <!-- 상단 헤더 -->
    <div class="mb-4">
        <a th:href="@{/profile/list}" class="btn btn-outline-secondary btn-sm">
            ← 프로필 목록으로
        </a>
    </div>

    <div class="card shadow-sm profile-header-card mb-4">
        <div class="card-body">
            <div class="d-flex justify-content-between align-items-start">
                <div>
                    <h3 class="card-title mb-1"
                        th:text="${profileDetail.profileTitle}">기본 커리어 프로필</h3>
                    <div class="mb-2 text-muted">
                        <span th:text="${profileDetail.displayName}">김부환</span>
                        <span> · </span>
                        <span th:text="${profileDetail.email}">email@example.com</span>
                    </div>

                    <div class="mb-2">
                        <span class="badge text-bg-primary badge-profile-type"
                              th:text="${profileDetail.profileTypeLabel}">ADULT_JOBSEEKER</span>
                        <span class="badge text-bg-secondary badge-profile-type"
                              th:text="${profileDetail.userGroup}">ADULT</span>
                    </div>

                    <p class="mb-0 text-muted" th:text="${profileDetail.mainSummary}">
                        프로필 요약 문장이 여기에 표시됩니다.
                    </p>
                </div>

                <div class="text-end text-muted">
                    <div>
                        생성일:
                        <span th:text="${#temporals.format(profileDetail.regDate, 'yyyy-MM-dd HH:mm')}">
                            2025-12-19 11:52
                        </span>
                    </div>
                    <div>
                        수정일:
                        <span th:text="${#temporals.format(profileDetail.modDate, 'yyyy-MM-dd HH:mm')}">
                            2025-12-19 11:52
                        </span>
                    </div>
                </div>
            </div>

            <hr>

            <!-- 향후 탭/버튼: 자기소개서 / AI 분석 -->
            <div class="d-flex gap-2">
                <a th:href="@{|/profile/${profileId}/essay|}"
                   class="btn btn-primary btn-sm">
                    자기소개서 작성 (AI)
                </a>
                <button class="btn btn-outline-secondary btn-sm" disabled>
                    AI 커리어 분석 (준비 중)
                </button>
            </div>
        </div>
    </div>

    <!-- 그리드 레이아웃: 좌측 스킬/가치관/근무환경, 우측 경험/고민 -->

    <div class="row g-4">

        <!-- 좌측 컬럼 -->
        <div class="col-lg-4">

            <!-- 스킬 -->
            <div class="card shadow-sm section-card mb-3">
                <div class="card-body">
                    <h5 class="card-title mb-3">보유 스킬</h5>
                    <div th:if="${#lists.isEmpty(profileDetail.skills)}">
                        <p class="text-muted mb-0">등록된 스킬이 없습니다.</p>
                    </div>
                    <ul class="list-group list-group-flush"
                        th:if="${!#lists.isEmpty(profileDetail.skills)}">
                        <li class="list-group-item"
                            th:each="skill : ${profileDetail.skills}">
                            <div class="d-flex justify-content-between">
                                <span th:text="${skill.skillName}">Java</span>
                                <span class="badge rounded-pill text-bg-light"
                                      th:text="${skill.skillLevel}">INTERMEDIATE</span>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>

            <!-- 직업 가치관 -->
            <div class="card shadow-sm section-card mb-3">
                <div class="card-body">
                    <h5 class="card-title mb-3">직업 가치관 (Top3)</h5>
                    <div th:if="${#lists.isEmpty(profileDetail.values)}">
                        <p class="text-muted mb-0">선택된 가치관이 없습니다.</p>
                    </div>
                    <ul class="list-group list-group-flush"
                        th:if="${!#lists.isEmpty(profileDetail.values)}">
                        <li class="list-group-item"
                            th:each="val : ${profileDetail.values}">
                            <span class="badge bg-primary me-2"
                                  th:text="${val.priorityOrder}">1</span>
                            <span th:text="${val.valueName}">성장 가능성</span>
                        </li>
                    </ul>
                </div>
            </div>

            <!-- 선호 근무 환경 -->
            <div class="card shadow-sm section-card">
                <div class="card-body">
                    <h5 class="card-title mb-3">선호 근무 환경</h5>
                    <div th:if="${#lists.isEmpty(profileDetail.workEnvs)}">
                        <p class="text-muted mb-0">선호 근무 환경이 아직 선택되지 않았습니다.</p>
                    </div>
                    <div th:if="${!#lists.isEmpty(profileDetail.workEnvs)}">
                        <span class="badge text-bg-light me-1 mb-1"
                              th:each="env : ${profileDetail.workEnvs}"
                              th:text="${env.workEnvName}">
                            재택/하이브리드
                        </span>
                    </div>
                </div>
            </div>

        </div>

        <!-- 우측 컬럼 -->
        <div class="col-lg-8">

            <!-- 보유 경험 -->
            <div class="card shadow-sm section-card mb-3">
                <div class="card-body">
                    <h5 class="card-title mb-3">보유 경험</h5>

                    <div th:if="${#lists.isEmpty(profileDetail.experiences)}">
                        <p class="text-muted mb-0">등록된 경험 정보가 없습니다.</p>
                    </div>

                    <div class="mb-3"
                         th:each="exp : ${profileDetail.experiences}">
                        <div class="d-flex justify-content-between align-items-center">
                            <div>
                                <span class="badge text-bg-info me-2"
                                      th:text="${exp.experienceTypeLabel}">경력</span>
                                <strong th:text="${exp.title}">AWS 기반 웹 개발 과정</strong>
                            </div>
                            <small class="text-muted"
                                   th:text="${exp.periodText}">2024.01.01 ~ 2024.06.30 (6개월)</small>
                        </div>
                        <div class="text-muted small" th:text="${exp.organization}">
                            우리인재개발원
                        </div>
                        <p class="mt-2 mb-1 small"
                           th:text="${exp.description}">
                            Java/SpringBoot 기반 프로젝트를 수행하며...
                        </p>
                        <p class="mb-1 small text-success"
                           th:if="${exp.outcome != null}"
                           th:text="'성과: ' + ${exp.outcome}">
                            성과: 프로젝트 완수 및 우수 수료
                        </p>
                        <a th:if="${exp.linkUrl != null}"
                           th:href="${exp.linkUrl}"
                           class="small"
                           target="_blank">
                            관련 링크 열기
                        </a>
                        <hr/>
                    </div>
                </div>
            </div>

            <!-- 진로 고민 -->
            <div class="card shadow-sm section-card">
                <div class="card-body">
                    <h5 class="card-title mb-3">현재 진로 고민</h5>

                    <div th:if="${#lists.isEmpty(profileDetail.concerns)}">
                        <p class="text-muted mb-0">등록된 고민 정보가 없습니다.</p>
                    </div>

                    <ul class="list-group list-group-flush"
                        th:if="${!#lists.isEmpty(profileDetail.concerns)}">
                        <li class="list-group-item"
                            th:each="c : ${profileDetail.concerns}">
                            <strong th:text="${c.concernName}">연봉중요</strong>
                            <div class="small text-muted mt-1"
                                 th:if="${c.detailText != null}"
                                 th:text="${c.detailText}">
                                나이와 연봉 수준에 대한 불안이 있습니다...
                            </div>
                        </li>
                    </ul>
                </div>
            </div>

        </div>
    </div>

</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js">
</script>
</body>
</html>
